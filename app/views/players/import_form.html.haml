-# app/views/players/import_form.html.haml

%section{ class: "max-w-3xl mx-auto px-6 py-10 text-stone-900" }
  %h1{ class: "text-2xl font-semibold" } Import Players

  %p{ class: "mt-2 text-stone-700" }
    Upload a CSV with headers: PCR ID, First, Last, Hitting, Fielding, Throwing, TOTAL, Pitching, NOTES.

  = form_with url: import_players_path, method: :post, multipart: true, data: { turbo: false } do |f|
    %div{ class: "mt-8 p-6 border border-stone-300 bg-white shadow-sm" }
      %div
        %div{ class: "text-sm font-medium text-stone-900" } CSV File

        - input_id = "players_import_file"

        %div{ class: "mt-3 flex items-center gap-4" }
          = f.file_field :file, id: input_id, class: "hidden", accept: ".csv,text/csv"

          %label{ for: input_id, class: "inline-flex items-center justify-center px-4 py-2 bg-stone-900 text-white font-semibold shadow-sm hover:bg-stone-800 cursor-pointer select-none" }
            Choose file

          %span{ id: "selected-file-name", class: "text-sm text-stone-700" }
            No file selected

        %p{ class: "mt-2 text-sm text-stone-600" }
          After choosing a file, click Import Players.

      %div{ class: "mt-6 flex items-center gap-4" }
        = f.submit "Import Players", class: "inline-flex items-center justify-center px-4 py-2 bg-stone-900 text-white font-semibold shadow-sm hover:bg-stone-800"
        = link_to "Cancel", players_path, class: "text-stone-700 underline hover:text-stone-900"

:javascript
  document.addEventListener("turbo:load", () => {
    const input = document.getElementById("players_import_file");
    const label = document.getElementById("selected-file-name");
    if (!input || !label) return;

    input.addEventListener("change", () => {
      const file = input.files && input.files[0];
      label.textContent = file ? file.name : "No file selected";
    });
  });